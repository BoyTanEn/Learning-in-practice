### 消费模式

常见的消费模式有两种：

`poll(拉)`：消费者主动向服务端拉取消息。

`push(推)`：服务端主动推送消息给消费者。

<font color = 'red'>由于推模式很难考虑到每个客户端不同的消费速率,导致消费者无法消费消息而宕机，因此kafka采用的是poll的模式</font>，该模式有个缺点，如果服务端没有消息，消费端就会一直空轮询。为了避免过多不必要的空轮询，kafka做了改进，如果没消息服务端就会暂时保持该请求，在一段时间内有消息再回应给客户端。

### 消费工作流程

#### 消费者总体工作流程

消费者对消息进行消费，并且将已经消费的消息加入 _consumer_offsets 中。

![](images/1.消费总体流程.png)













